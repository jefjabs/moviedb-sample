(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t){e.exports={url:"/api/v1",getMovies:function(e){fetch(this.url+"/Movie").then(function(e){return e.json()}).then(function(t){e(t)})},getMovie:function(e,t){fetch(this.url+"/Movie/"+e).then(function(e){return e.json()}).then(function(e){t(e)})},updateMovie:function(e,t,a){fetch(this.url+"/Movie/"+e,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"PUT",body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){a(e)})},deleteMovie:function(e){},createMovie:function(e){}}},15:function(e,t,a){},18:function(e,t,a){e.exports=a(28)},28:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(13),o=a.n(i),c=a(5),l=a(6),r=a(9),m=a(7),u=a(10),h=a(30),d=a(31),v=a(3),f=a(11),p=a.n(f),E=(a(15),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(r.a)(this,Object(m.a)(t).call(this))).state={movies:[],categories:[]},e.updateCategories=e.updateCategories.bind(Object(v.a)(Object(v.a)(e))),e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){e.movies!=[]&&e.movies!=this.state.movies&&(this.state.movies=e.movies,this.updateCategories())}},{key:"updateCategories",value:function(){var e=[];this.state.movies.map(function(t,a){e=(e=e.concat(t.tags.split(","))).filter(function(t,a){return e.indexOf(t)==a}),a+1==this.state.movies.length&&this.setState({categories:e})}.bind(this))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"header"},s.a.createElement("a",{href:"/"},s.a.createElement("img",{className:"logo",src:"/logo.png"})),s.a.createElement("input",{id:"search-box",onKeyUp:this.props.filterMovies,className:"search-box",type:"text",placeholder:"Search"}),s.a.createElement("select",{id:"category",className:"categories-selection",onChange:function(t){return e.props.filterMovies(t,!0)}},s.a.createElement("option",{value:"all"},"All"),this.state.categories.map(function(e,t){return s.a.createElement("option",{key:t,value:e.toLowerCase().trim()},e.trim())})))}}]),t}(n.Component)),b=a(12),g=a.n(b),y=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(r.a)(this,Object(m.a)(t).call(this))).state={movies:[],filteredMovies:[],show:!1},p.a.getMovies(function(e){this.setState({movies:e,filteredMovies:e}),"cat"!=this.props.match.params.q&&void 0!=this.props.match.params.q&&(document.getElementById("search-box").value=this.props.match.params.q.trim()),void 0!=this.props.match.params.cat&&(document.getElementById("category").value=this.props.match.params.cat),this.filterMovies()}.bind(Object(v.a)(Object(v.a)(e)))),e.filterMovies=e.filterMovies.bind(Object(v.a)(Object(v.a)(e))),e.getCasts=e.getCasts.bind(Object(v.a)(Object(v.a)(e))),e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){setTimeout(function(){this.setState({show:!0})}.bind(this),1e3)}},{key:"filterMovies",value:function(e,t){var a=document.getElementById("search-box").value.toLowerCase(),n=document.getElementById("category").value.toLowerCase(),s=[];this.state.movies.map(function(e,t){if(""==a.trim()||-1!=e.title.toLowerCase().indexOf(a.trim()))if("all"==n)s.push(e);else for(var i=e.tags.split(","),o=0;o<=i.length;o++)void 0!=i[o]&&i[o].trim().toLowerCase()==n.toLowerCase().trim()&&s.push(e)}.bind(this)),this.setState({filteredMovies:s})}},{key:"getCasts",value:function(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a].name);return t.slice(0,3).join(",")}},{key:"render",value:function(){return s.a.createElement("div",{style:{opacity:this.state.show?1:0},className:g()("page-wrapper",{show:this.state.show})},s.a.createElement(E,{movies:this.state.movies,filterMovies:this.filterMovies}),s.a.createElement("div",{className:"movie-listing"},this.state.filteredMovies.map(function(e,t){return s.a.createElement("div",{key:t,className:"movie"},s.a.createElement("a",{href:"/movie/"+e._id},s.a.createElement("img",{src:e.image,className:"movie-image"})),s.a.createElement("div",{className:"movie-info-wrap"},s.a.createElement("h3",null,s.a.createElement("a",{href:"/movie/"+e._id},e.title)),s.a.createElement("h4",null,e.summary.substring(0,100),e.summary.length>100&&s.a.createElement("span",null,"...")),s.a.createElement("h5",null,"Cast : ",this.getCasts(e.cast)),s.a.createElement("h6",null,"Tags : \xa0",s.a.createElement("span",{className:"tags"},e.tags.split(",").slice(0,3).map(function(e,t){return s.a.createElement("span",{key:t},e)}),e.tags.split(",").length>3&&s.a.createElement("span",null,"...")))))}.bind(this)),this.state.filteredMovies.length<=0&&s.a.createElement("div",null,"Sorry, No Results Found...")))}}]),t}(n.Component),w=a(16),C=(a(26),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(r.a)(this,Object(m.a)(t).call(this))).state={data:{tags:"",cast:[]},show:!1,movies:[],showCastModal:!1,castName:"",castRole:"",castFormData:{type:"",title:"",btn:"",callback:function(){}}},e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){p.a.getMovie(this.props.match.params.id,function(e){this.setState({data:e})}.bind(this)),p.a.getMovies(function(e){this.setState({movies:e,filteredMovies:e})}.bind(this)),setTimeout(function(){this.setState({show:!0})}.bind(this),500)}},{key:"filterMovies",value:function(e,t){var a=document.getElementById("search-box").value.toLowerCase();if(13==e.keyCode&&""!=a.trim()||t){var n=document.getElementById("category").value.toLowerCase();""==a.trim()&&"all"!=n?window.location.href="/search/cat/"+n:"all"==n.toLowerCase()?window.location.href="/search/"+a.trim():window.location.href="/search/"+a.trim()+"/"+n}}},{key:"addCast",value:function(){this.resetCastForm(),this.setState({showCastModal:!0,castFormData:{title:"Add",btn:"Add",callback:function(){var e=document.getElementById("cast-form-name").value,t=document.getElementById("cast-form-role").value;this.state.data.cast.push({name:e,role:t}),p.a.updateMovie(this.state.data._id,this.state.data,function(e){this.setState({showCastModal:!1,data:this.state.data})}.bind(this))}.bind(this)}})}},{key:"editCast",value:function(e){this.resetCastForm();var t=this.state.data.cast[e];document.getElementById("cast-form-name").value=t.name,document.getElementById("cast-form-role").value=t.role,this.setState({showCastModal:!0,castFormData:{title:"Edit",btn:"Edit",callback:function(){var t=document.getElementById("cast-form-name").value,a=document.getElementById("cast-form-role").value;this.state.data.cast[e]={name:t,role:a},p.a.updateMovie(this.state.data._id,this.state.data,function(e){this.setState({showCastModal:!1,data:this.state.data})}.bind(this))}.bind(this)}})}},{key:"deleteCast",value:function(e){var t={title:"Confirm!",message:"Are you sure you want to delete this cast?",buttons:[{label:"Yes",onClick:function(){this.state.data.cast.splice(e,1),p.a.updateMovie(this.state.data._id,this.state.data,function(e){this.setState({data:this.state.data})}.bind(this))}.bind(this)},{label:"No"}]};Object(w.confirmAlert)(t)}},{key:"resetCastForm",value:function(){document.getElementById("cast-form-name").value="",document.getElementById("cast-form-role").value=""}},{key:"render",value:function(){var e=this,t=this.state.data;return s.a.createElement("div",{style:{opacity:this.state.show?1:0},className:g()("page-wrapper",{show:this.state.show})},s.a.createElement(E,{movies:this.state.movies,filterMovies:this.filterMovies}),s.a.createElement("div",{className:"movie-wrap movie-page"},s.a.createElement("div",{className:"movie"},s.a.createElement("img",{src:t.image,className:"movie-image"}),s.a.createElement("div",{className:"movie-info-wrap"},s.a.createElement("h3",null,s.a.createElement("a",{href:"/movie/"+t._id},t.title)),s.a.createElement("h4",null,t.summary),s.a.createElement("div",null,s.a.createElement("h5",null,"Casts : ",s.a.createElement("button",{className:"add-cast-btn",onClick:function(){return e.addCast()}},"Add Cast")),s.a.createElement("div",{className:"casts-wrap"},t.cast.map(function(e,t){var a=this;return s.a.createElement("div",{className:"cast"},s.a.createElement("span",{className:"name"},e.name," as ",s.a.createElement("span",{className:"role"},e.role)),s.a.createElement("span",{className:"actions"},s.a.createElement("button",{className:"edit-btn",onClick:function(){return a.editCast(t)}},"Edit"),s.a.createElement("button",{className:"delete-btn",onClick:function(){return a.deleteCast(t)}},"Delete")))}.bind(this)))),s.a.createElement("h6",null,"Tags : \xa0",s.a.createElement("span",{className:"tags"},t.tags.split(",").map(function(e,t){return s.a.createElement("span",{key:t},e)})))))),s.a.createElement("div",{className:g()("cast-modal-form",{show:this.state.showCastModal})},s.a.createElement("div",{className:"bg",onClick:function(){return e.setState({showCastModal:!1})}}),s.a.createElement("div",{className:"inner"},s.a.createElement("div",{className:"cast-form-wrap"},s.a.createElement("h4",null,this.state.castFormData.title," Cast"),s.a.createElement("br",null),s.a.createElement("label",null,s.a.createElement("span",{className:"label"},"Name"),s.a.createElement("input",{id:"cast-form-name",type:"text"})),s.a.createElement("label",null,s.a.createElement("span",{className:"label"},"Role"),s.a.createElement("input",{id:"cast-form-role",type:"text"})),s.a.createElement("div",{className:"react-confirm-alert-button-group"},s.a.createElement("button",{onClick:function(){return e.state.castFormData.callback()}},this.state.castFormData.btn),s.a.createElement("button",{onClick:function(){return e.setState({showCastModal:!1})}},"Cancel"))))))}}]),t}(n.Component)),M=function(e){function t(){return Object(c.a)(this,t),Object(r.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(h.a,null,s.a.createElement("div",null,s.a.createElement(d.a,{path:"/",exact:!0,component:y}),s.a.createElement(d.a,{path:"/search/:q",exact:!0,component:y}),s.a.createElement(d.a,{path:"/search/:q/:cat",exact:!0,component:y}),s.a.createElement(d.a,{path:"/test",exact:!0,component:y}),s.a.createElement(d.a,{path:"/movie/:id",exact:!0,component:C})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[18,1,2]]]);
//# sourceMappingURL=main.80e137df.chunk.js.map